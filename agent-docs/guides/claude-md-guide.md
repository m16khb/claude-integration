# CLAUDE.md 파일 사용 가이드

> Claude Code 공식 블로그 기반 정리 (2025.11.25)
> 원문: https://claude.com/blog/using-claude-md-files

## 개요

AI 코딩 에이전트를 사용할 때 가장 큰 문제는 **매번 아키텍처, 컨벤션, 워크플로우를 반복 설명해야 한다는 것**입니다. 코드베이스가 커질수록 이 문제는 심화됩니다.

**CLAUDE.md**는 Claude Code에 프로젝트별 영구 컨텍스트를 제공하여 이 문제를 해결합니다. 모든 대화에 자동으로 포함되어 프로젝트 구조, 코딩 표준, 선호 워크플로우를 항상 인지합니다.

## CLAUDE.md란?

CLAUDE.md는 저장소에 위치하며 Claude에게 프로젝트별 컨텍스트를 제공하는 **특수 설정 파일**입니다.

### 배치 위치

| 위치 | 용도 |
|------|------|
| 저장소 루트 | 팀과 공유 |
| 상위 디렉토리 | 모노레포 설정 |
| 홈 폴더 | 모든 프로젝트에 적용 |

### 예시

```markdown
# Project Context

이 코드베이스에서 작업할 때 기교보다 가독성을 우선합니다.
아키텍처 변경 전에 명확히 질문해주세요.

## About This Project

FastAPI REST API로 사용자 인증 및 프로필 관리.
SQLAlchemy(DB 작업), Pydantic(유효성 검사) 사용.

## Key Directories

- `app/models/` - 데이터베이스 모델
- `app/api/` - 라우트 핸들러
- `app/core/` - 설정 및 유틸리티

## Standards

- 모든 함수에 타입 힌트 필수
- pytest로 테스트 (`tests/conftest.py`에 fixture)
- PEP 8, 100자 라인 제한

## Common Commands
```bash
uvicorn app.main:app --reload  # 개발 서버
pytest tests/ -v               # 테스트 실행
```

## Notes

모든 라우트는 `/api/v1` 접두사 사용. JWT 토큰은 24시간 후 만료.
```

### 포함할 내용

- Bash 명령어
- 핵심 유틸리티
- 코드 스타일 가이드라인
- 테스트 지침
- 저장소 컨벤션
- 개발 환경 설정
- 프로젝트별 주의사항

> **핵심**: 특정 형식이 필요 없음. 간결하고 사람이 읽기 쉽게, 문서처럼 작성.

## /init으로 시작하기

### 사용 방법

```bash
cd your-project
claude
/init
```

### /init이 하는 일

1. 코드베이스 분석 (패키지 파일, 문서, 설정 파일, 코드 구조)
2. 프로젝트에 맞는 CLAUDE.md 생성
3. 빌드 명령어, 테스트 지침, 주요 디렉토리, 코딩 컨벤션 포함

### /init 이후 할 일

| 단계 | 설명 |
|------|------|
| 정확성 검토 | 생성된 내용 확인 |
| 워크플로우 추가 | Claude가 추론할 수 없는 것들 (브랜치 명명, 배포 프로세스, 코드 리뷰 요구사항) |
| 불필요한 내용 제거 | 프로젝트에 해당하지 않는 일반적 가이드 삭제 |
| 버전 관리 커밋 | 팀이 혜택 받도록 커밋 |

> **팁**: 기존 CLAUDE.md가 있는 프로젝트에서도 `/init` 사용 가능. Claude가 현재 파일을 검토하고 개선점 제안.

## CLAUDE.md 구조화 방법

### 1. Claude에게 지도 제공

프로젝트 요약과 고수준 디렉토리 구조를 추가하여 즉시 방향을 잡게 합니다.

```
main.py
├── logs
│   ├── application.log
├── modules
│   ├── cli.py
│   ├── logging_utils.py
│   ├── media_handler.py
│   ├── player.py
```

**포함할 정보:**
- 주요 의존성
- 아키텍처 패턴
- 비표준 구조적 선택
- DDD, 마이크로서비스, 특정 프레임워크 사용 시 문서화

### 2. Claude를 도구에 연결

Claude는 환경을 상속받지만 어떤 커스텀 도구를 사용할지 안내가 필요합니다.

```markdown
### Slack MCP
- #dev-notifications 채널에만 포스트
- 배포 알림 및 빌드 실패에 사용
- 개별 PR 업데이트는 사용 안 함 (GitHub webhooks 사용)
- 시간당 10개 메시지 제한
```

**문서화할 내용:**
- 도구 이름
- 기본 사용 패턴
- 호출 시점
- `--help` 플래그 사용 가능 여부
- 팀이 자주 사용하는 일반적인 호출 예시

> Claude는 MCP(Model Context Protocol) 클라이언트로 기능하며, MCP 서버에 연결하여 기능을 확장합니다.

### 3. 표준 워크플로우 정의

Claude가 계획 없이 바로 코드 변경에 뛰어들면 재작업이 발생합니다.

**변경 전 답해야 할 4가지 질문:**

1. 먼저 조사가 필요한 현재 상태에 대한 질문인가?
2. 구현 전 상세 계획이 필요한가?
3. 누락된 추가 정보는 무엇인가?
4. 효과성을 어떻게 테스트할 것인가?

**워크플로우 예시:**

```markdown
1) 다음 위치의 코드 수정 전: X, Y, Z
   - A, B, C에 미칠 영향 고려
   - 구현 계획 수립
   - 다음 함수들을 검증할 테스트 계획 개발...
```

**추천 워크플로우 유형:**
- 기능: explore-plan-code-commit
- 알고리즘: TDD (테스트 주도 개발)
- UI: 시각적 반복

## Claude Code 추가 팁

### 1. 컨텍스트 신선하게 유지 (/clear)

시간이 지나면 관련 없는 컨텍스트가 쌓입니다. 이전 작업의 파일 내용, 더 이상 중요하지 않은 명령어 출력, 관련 없는 대화가 컨텍스트 윈도우를 채웁니다.

```bash
/clear
```

**사용 시점**: 별개의 작업 사이에 사용하여 컨텍스트 윈도우 리셋. CLAUDE.md 설정은 유지됨.

> 예: 인증 디버깅 완료 후 새 API 엔드포인트 구현으로 전환 시

### 2. 구분된 단계에 서브에이전트 사용

긴 대화는 새 작업을 방해하는 컨텍스트를 축적합니다.

```
"해당 코드의 보안 리뷰를 수행하기 위해 서브에이전트를 사용해줘"
```

**서브에이전트가 효과적인 경우:**
- 각 단계가 다른 관점을 요구하는 다단계 워크플로우
- 구현은 아키텍처 컨텍스트와 기능 요구사항 필요
- 보안 리뷰는 취약점에만 집중하는 새로운 시각 필요

### 3. 커스텀 커맨드 생성

반복적인 프롬프트는 시간 낭비입니다.

**생성 방법:**

```bash
# Claude에게 요청
"database 쿼리 이슈, 알고리즘 효율성, 메모리 관리, 캐싱 기회를 분석하는
/performance-optimization 커스텀 슬래시 커맨드를 만들어줘"
```

Claude가 `.claude/commands/performance-optimization.md`에 마크다운 파일을 작성하면 즉시 사용 가능.

**커맨드 파일 위치**: `.claude/commands/` 디렉토리

**인자 전달**: `$ARGUMENTS` 또는 `$1`, `$2` 등 번호 플레이스홀더 지원

## 모범 사례

### DO ✅

```
BEST PRACTICES:
├─ 간단하게 시작, 점진적 확장
├─ 실제 마찰점 기반으로 추가
├─ 팀이 실제로 소프트웨어를 개발하는 방식 반영
├─ 반복적으로 타이핑하는 명령어 문서화
├─ 설명에 10분 걸리는 아키텍처 컨텍스트 캡처
└─ 재작업 방지하는 워크플로우 수립
```

### DON'T ❌

```
AVOID:
├─ 처음부터 포괄적인 CLAUDE.md 작성 시도
├─ 민감한 정보 포함 (API 키, 자격 증명, DB 연결 문자열)
├─ 상세 보안 취약점 정보
├─ 현실과 맞지 않는 이론적 모범 사례
└─ 모든 내용을 한 파일에 (별도 마크다운 파일 참조 권장)
```

### 정보 분리 전략

CLAUDE.md는 매번 컨텍스트에 추가되므로 **간결하게 유지**해야 합니다.

```markdown
# CLAUDE.md (간결하게)

## 상세 문서
- @agent-docs/detailed-guide.md - 상세 가이드
- @agent-docs/examples.md - 예제 모음
```

## 핵심 요약

| 항목 | 설명 |
|------|------|
| **목적** | 프로젝트별 영구 컨텍스트 제공 |
| **위치** | 저장소 루트, 상위 디렉토리, 홈 폴더 |
| **시작** | `/init` 명령어로 자동 생성 |
| **구조화** | 지도(아키텍처), 도구 연결, 워크플로우 정의 |
| **유지보수** | 지속적 업데이트, 실제 사용 패턴 반영 |
| **주의** | 간결하게 유지, 민감 정보 제외 |

## 관련 문서

- @../usage.md - 사용 가이드
- @../../CLAUDE.md - 루트 CLAUDE.md

---

**원문 출처**: [Claude 공식 블로그 - Using CLAUDE.md files](https://claude.com/blog/using-claude-md-files)
