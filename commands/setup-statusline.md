---
name: setup-statusline
description: 'YAML 설정 기반 status line 환경 구성'
allowed-tools: Read, Write, Bash(cp *), Bash(chmod *), Bash(mkdir *), Bash(cat *)
model: claude-opus-4-5-20251101
---

# Setup Status Line

## MISSION

Claude Code status line 환경을 자동 구성합니다.

**Args**: $ARGUMENTS

- 인자 없음: 기본 설정으로 구성
- config-path: 지정된 YAML 설정 파일 사용

---

## CRITICAL RULES

```
⚠️ 절대 statusline.sh 코드를 직접 작성하지 마세요!
⚠️ 반드시 템플릿 파일을 그대로 복사해야 합니다!
```

---

## PHASE 1: Find Plugin Directory

플러그인 디렉토리 위치 확인 (우선순위 순):

```bash
# 일반적인 위치들
PLUGIN_DIRS=(
  "$HOME/.claude/plugins/marketplaces/claude-integration"
  "$HOME/.claude/plugins/claude-integration@claude-integration"
  "$HOME/.claude/plugins/claude-integration"
)
```

Use Glob tool to find: `~/.claude/plugins/**/templates/statusline.sh`

Read the template file from the found location.

---

## PHASE 2: Copy Template (DO NOT MODIFY!)

```
ACTION: 템플릿을 ~/.claude/statusline.sh로 복사

COMMAND:
  cp "{plugin_dir}/templates/statusline.sh" ~/.claude/statusline.sh
  chmod +x ~/.claude/statusline.sh

⚠️ IMPORTANT:
  - 템플릿 파일을 읽고 그대로 Write 도구로 복사
  - 코드를 수정하거나 재작성하지 말 것
  - 한 글자도 변경하지 말 것
```

---

## PHASE 3: Generate Config File (Optional)

IF user provided YAML config OR config file exists:

```bash
# ~/.claude/statusline-vars.sh 생성
# YAML 설정에서 값만 추출하여 변수 정의

# Example output:
MODE="compact"
COLORS_ENABLED="true"
EMOJI_ENABLED="true"
COLOR_MODEL="38;5;33"
SHOW_MODEL="true"
SHOW_DIRECTORY="true"
SHOW_BRANCH="true"
SHOW_GIT_STATUS="true"
```

Config file format (`~/.claude/statusline-vars.sh`):
```bash
#!/bin/bash
# Status Line Configuration
# Generated by /setup-statusline

# Display mode
MODE="extended"

# Feature toggles
COLORS_ENABLED="true"
EMOJI_ENABLED="true"

# What to display
SHOW_MODEL="true"
SHOW_DIRECTORY="true"
SHOW_BRANCH="true"
SHOW_GIT_STATUS="true"
SHOW_COST="false"
```

---

## PHASE 4: Update settings.json

Update `~/.claude/settings.json`:

```json
{
  "statusLine": {
    "type": "command",
    "command": "/bin/bash ~/.claude/statusline.sh"
  }
}
```

**Important**: Merge with existing settings, don't overwrite.

---

## PHASE 5: Verify

```bash
echo '{"model":"claude-opus-4-5-20251101","workspaceDirs":["/test"]}' | ~/.claude/statusline.sh
```

Expected output should show colored text with emojis (if enabled).

---

## PHASE 6: Report (Korean)

```markdown
## ✅ Status Line 설정 완료

| 항목 | 경로 |
|------|------|
| 스크립트 | `~/.claude/statusline.sh` |
| 설정 파일 | `~/.claude/statusline-vars.sh` (선택) |
| 설정 | `~/.claude/settings.json` |

### 적용 방법

Claude Code를 **재시작**하면 status line이 활성화됩니다.

### 커스터마이징

`~/.claude/statusline-vars.sh` 파일을 수정하세요:

\`\`\`bash
# 예: 디렉토리 숨기기
SHOW_DIRECTORY="false"

# 예: 이모지 비활성화
EMOJI_ENABLED="false"

# 예: 색상 변경 (ANSI 256색)
COLOR_MODEL="38;5;196"  # 빨간색
\`\`\`
```

---

## EXECUTE NOW

1. **Read** template from plugin: `templates/statusline.sh`
2. **Write** template to: `~/.claude/statusline.sh` (NO MODIFICATIONS!)
3. **Chmod** +x the script
4. **Update** `~/.claude/settings.json`
5. **Test** the script
6. **Report** in Korean
